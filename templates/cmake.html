<h1>CMake</h1>
<p>CMake is a cross-platform, open-source build system. This tool allows you to test,<br>
compile, and create packages of your source code.</p>
<p>The problem that CMake tries to solve is the problem of Makefiles and<br>
Autoconfigure on cross-platforms (different make interpreters have different<br>
commands) and the ease-of-use on linking 3rd party libraries.</p>
<p>CMake is an extensible, open-source system that manages the build process in<br>
an operating system and compiler-agnostic manner. Unlike many<br>
cross-platform systems, CMake is designed to be used in conjunction with the<br>
native build environment. Simple configuration files placed in each source<br>
directory (called CMakeLists.txt files) are used to generate standard build<br>
files (e.g., makefiles on Unix and projects/workspaces in Windows MSVC) which<br>
are used in the usual way.</p>
<div class="highlight highlight-source-cmake"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> In CMake, this is a comment</span>

<span class="pl-c"><span class="pl-c">#</span> To run our code, please perform the following commands:</span>
<span class="pl-c"><span class="pl-c">#</span>  - mkdir build &amp;&amp; cd build</span>
<span class="pl-c"><span class="pl-c">#</span>  - cmake ..</span>
<span class="pl-c"><span class="pl-c">#</span>  - make</span>
<span class="pl-c"><span class="pl-c">#</span> </span>
<span class="pl-c"><span class="pl-c">#</span> With those steps, we will follow the best practice to compile into a subdir</span>
<span class="pl-c"><span class="pl-c">#</span> and the second line will request to CMake to generate a new OS-dependent</span>
<span class="pl-c"><span class="pl-c">#</span> Makefile. Finally, run the native Make command.</span>

<span class="pl-c"><span class="pl-c">#</span>------------------------------------------------------------------------------</span>
<span class="pl-c"><span class="pl-c">#</span> Basic</span>
<span class="pl-c"><span class="pl-c">#</span>------------------------------------------------------------------------------</span>
<span class="pl-c"><span class="pl-c">#</span></span>
<span class="pl-c"><span class="pl-c">#</span> The CMake file MUST be named as "CMakeLists.txt".</span>

<span class="pl-c"><span class="pl-c">#</span> Setup the minimum version required of CMake to generate the Makefile</span>
<span class="pl-c1">cmake_minimum_required</span> (<span class="pl-k">VERSION</span> 2.8)

<span class="pl-c"><span class="pl-c">#</span> Raises a FATAL_ERROR if version &lt; 2.8</span>
<span class="pl-c1">cmake_minimum_required</span> (<span class="pl-k">VERSION</span> 2.8 <span class="pl-k">FATAL_ERROR</span>)

<span class="pl-c"><span class="pl-c">#</span> We define the name of our project, and this changes some directories</span>
<span class="pl-c"><span class="pl-c">#</span> naming convention generated by CMake. We can send the LANG of code</span>
<span class="pl-c"><span class="pl-c">#</span> as the second param</span>
<span class="pl-c1">project</span> (learncmake C)

<span class="pl-c"><span class="pl-c">#</span> Set the project source dir (just convention)</span>
<span class="pl-c1">set</span>( LEARN_CMAKE_SOURCE_DIR <span class="pl-smi">${CMAKE_CURRENT_SOURCE_DIR}</span> )
<span class="pl-c1">set</span>( LEARN_CMAKE_BINARY_DIR <span class="pl-smi">${CMAKE_CURRENT_BINARY_DIR}</span> )

<span class="pl-c"><span class="pl-c">#</span> It's useful to set up the current version of our code in the build system</span>
<span class="pl-c"><span class="pl-c">#</span> using a `semver` style</span>
<span class="pl-c1">set</span> (LEARN_CMAKE_VERSION_MAJOR 1)
<span class="pl-c1">set</span> (LEARN_CMAKE_VERSION_MINOR 0)
<span class="pl-c1">set</span> (LEARN_CMAKE_VERSION_PATCH 0)

<span class="pl-c"><span class="pl-c">#</span> Send the variables (version number) to the source code header</span>
<span class="pl-c1">configure_file</span> (
  <span class="pl-s">"<span class="pl-smi">${PROJECT_SOURCE_DIR}</span>/TutorialConfig.h.in"</span>
  <span class="pl-s">"<span class="pl-smi">${PROJECT_BINARY_DIR}</span>/TutorialConfig.h"</span>
)

<span class="pl-c"><span class="pl-c">#</span> Include Directories</span>
<span class="pl-c"><span class="pl-c">#</span> In GCC, this will invoke the "-I" command</span>
<span class="pl-c1">include_directories</span>( include )

<span class="pl-c"><span class="pl-c">#</span> Where are the additional libraries installed? Note: provide includes</span>
<span class="pl-c"><span class="pl-c">#</span> path here, subsequent checks will resolve everything else</span>
<span class="pl-c1">set</span>( <span class="pl-k">CMAKE_MODULE_PATH</span> <span class="pl-smi">${CMAKE_MODULE_PATH}</span> <span class="pl-s">"<span class="pl-smi">${CMAKE_SOURCE_DIR}</span>/CMake/modules/"</span> )

<span class="pl-c"><span class="pl-c">#</span> Conditions</span>
<span class="pl-k">if</span> ( <span class="pl-k">CONDITION</span> )
  <span class="pl-c"><span class="pl-c">#</span> Output!</span>

  <span class="pl-c"><span class="pl-c">#</span> Incidental information</span>
  <span class="pl-c1">message</span>(STATUS <span class="pl-s">"My message"</span>)

  <span class="pl-c"><span class="pl-c">#</span> CMake Warning, continue processing</span>
  <span class="pl-c1">message</span>(WARNING <span class="pl-s">"My message"</span>)

  <span class="pl-c"><span class="pl-c">#</span> CMake Warning (dev), continue processing</span>
  <span class="pl-c1">message</span>(AUTHOR_WARNING <span class="pl-s">"My message"</span>)

  <span class="pl-c"><span class="pl-c">#</span> CMake Error, continue processing, but skip generation</span>
  <span class="pl-c1">message</span>(SEND_ERROR <span class="pl-s">"My message"</span>)

  <span class="pl-c"><span class="pl-c">#</span> CMake Error, stop processing and generation</span>
  <span class="pl-c1">message</span>(<span class="pl-k">FATAL_ERROR</span> <span class="pl-s">"My message"</span>)
<span class="pl-k">endif</span>()

<span class="pl-k">if</span>( <span class="pl-k">CONDITION</span> )

<span class="pl-k">elseif</span>( <span class="pl-k">CONDITION</span> )

<span class="pl-k">else</span>( <span class="pl-k">CONDITION</span> )

<span class="pl-k">endif</span>( <span class="pl-k">CONDITION</span> )

<span class="pl-c"><span class="pl-c">#</span> Loops</span>
<span class="pl-k">foreach</span>(loop_var arg1 arg2 ...)
  COMMAND1(<span class="pl-k">ARGS</span> ...)
  COMMAND2(<span class="pl-k">ARGS</span> ...)
  ...
<span class="pl-k">endforeach</span>(loop_var)

<span class="pl-k">foreach</span>(loop_var <span class="pl-k">RANGE</span> total)
<span class="pl-k">foreach</span>(loop_var <span class="pl-k">RANGE</span> start stop [step])

<span class="pl-k">foreach</span>(loop_var <span class="pl-k">IN</span> [<span class="pl-k">LISTS</span> [list1 [...]]]
                    [<span class="pl-k">ITEMS</span> [item1 [...]]])

<span class="pl-k">while</span>(condition)
  COMMAND1(<span class="pl-k">ARGS</span> ...)
  COMMAND2(<span class="pl-k">ARGS</span> ...)
  ...
<span class="pl-k">endwhile</span>(condition)


<span class="pl-c"><span class="pl-c">#</span> Logic Operations</span>
<span class="pl-k">if</span>(<span class="pl-c1">FALSE</span> <span class="pl-k">AND</span> (<span class="pl-c1">FALSE</span> <span class="pl-k">OR</span> TRUE))
  <span class="pl-c1">message</span>(<span class="pl-s">"Don't display!"</span>)
<span class="pl-k">endif</span>()

<span class="pl-c"><span class="pl-c">#</span> Set a regular, cache, or environment variable to a given value.</span>
<span class="pl-c"><span class="pl-c">#</span> If the PARENT_SCOPE option is given, the variable will be set in the scope</span>
<span class="pl-c"><span class="pl-c">#</span> above the current scope.</span>
<span class="pl-c"><span class="pl-c">#</span> `set(&lt;variable&gt; &lt;value&gt;... [PARENT_SCOPE])`</span>

<span class="pl-c"><span class="pl-c">#</span> How to reference variables inside quoted and unquoted arguments?</span>
<span class="pl-c"><span class="pl-c">#</span> A variable reference is replaced by either the variable value or by the </span>
<span class="pl-c"><span class="pl-c">#</span> empty string if the variable is not set.</span>
<span class="pl-smi">${variable_name}</span>

<span class="pl-c"><span class="pl-c">#</span> Lists</span>
<span class="pl-c"><span class="pl-c">#</span> Setup the list of source files</span>
<span class="pl-c1">set</span>( LEARN_CMAKE_SOURCES 
  src/main.c
  src/imagem.c
  src/pather.c
)

<span class="pl-c"><span class="pl-c">#</span> Calls the compiler</span>
<span class="pl-c"><span class="pl-c">#</span></span>
<span class="pl-c"><span class="pl-c">#</span> ${PROJECT_NAME} refers to Learn_CMake </span>
<span class="pl-c1">add_executable</span>( <span class="pl-smi">${PROJECT_NAME}</span> <span class="pl-smi">${LEARN_CMAKE_SOURCES}</span> )

<span class="pl-c"><span class="pl-c">#</span> Link the libraries</span>
<span class="pl-c1">target_link_libraries</span>( <span class="pl-smi">${PROJECT_NAME}</span> <span class="pl-smi">${LIBS}</span> m )

<span class="pl-c"><span class="pl-c">#</span> Where are the additional libraries installed? Note: provide includes</span>
<span class="pl-c"><span class="pl-c">#</span> path here, subsequent checks will resolve everything else</span>
<span class="pl-c1">set</span>( <span class="pl-k">CMAKE_MODULE_PATH</span> <span class="pl-smi">${CMAKE_MODULE_PATH}</span> <span class="pl-s">"<span class="pl-smi">${CMAKE_SOURCE_DIR}</span>/CMake/modules/"</span> )

<span class="pl-c"><span class="pl-c">#</span> Compiler Condition (gcc ; g++)</span>
<span class="pl-k">if</span> ( <span class="pl-s">"<span class="pl-smi">${CMAKE_C_COMPILER_ID}</span>"</span> <span class="pl-k">STREQUAL</span> <span class="pl-s">"GNU"</span> )
  <span class="pl-c1">message</span>( STATUS <span class="pl-s">"Setting the flags for <span class="pl-smi">${CMAKE_C_COMPILER_ID}</span> compiler"</span> )
  <span class="pl-c1">add_definitions</span>( --std=c99 )
<span class="pl-k">endif</span>()

<span class="pl-c"><span class="pl-c">#</span> Check for OS</span>
<span class="pl-k">if</span>( <span class="pl-k">UNIX</span> )
    <span class="pl-c1">set</span>( LEARN_CMAKE_DEFINITIONS
        <span class="pl-s">"<span class="pl-smi">${LEARN_CMAKE_DEFINITIONS}</span> -Wall -Wextra -Werror -Wno-deprecated-declarations -Wno-unused-parameter -Wno-comment"</span> )
<span class="pl-k">endif</span>()</pre></div>
<h3>More Resources</h3>
<ul>
<li><a href="https://cmake.org/cmake-tutorial/" rel="nofollow">CMake tutorial</a></li>
<li><a href="https://cmake.org/documentation/" rel="nofollow">CMake documentation</a></li>
<li><a href="http://amzn.com/1930934319/" rel="nofollow">Mastering CMake</a></li>
<li><a href="https://cliutils.gitlab.io/modern-cmake/" rel="nofollow">An Introduction to Modern CMake</a></li>
</ul>
<hr>
<h2>Contributors</h2>
<pre class="notranslate"><code class="notranslate">- ["Bruno Alano", "https://github.com/brunoalano"]
</code></pre>